let selectedOperator,runningTotal=0,currentOperand=0,lastAction="equals",outputValue="";const output=document.querySelector(".output");function buttonClicked(t){isNaN(parseInt(t))?handleOperator(t):handleNumber(t),writeOutput(),console.log(`State after "${t}": operator: ${selectedOperator}, total: ${runningTotal}, operand: ${currentOperand}, last action: ${lastAction}`)}function writeOutput(){outputValue.length>13&&("number"===lastAction?outputValue=outputValue.substr(0,13):(clear(),outputValue="ERROR")),output.innerText=outputValue}function handleNumber(t){switch(lastAction){case"number":"0"===outputValue?outputValue=t:outputValue+=t;break;case"operator":outputValue=t;break;case"equals":clear(),outputValue=t}lastAction="number"}function handleOperator(t){switch(t){case"clear":clear();break;case"back":"equals"===lastAction?clear():backspace();break;case"divide":case"multiply":case"subtract":case"add":"number"===lastAction&&(runningTotal=currentOperand,currentOperand=parseInt(outputValue),execute()),selectedOperator=t,lastAction="operator";break;case"equals":if("operator"===lastAction)return;"number"===lastAction&&(currentOperand=parseInt(outputValue)),execute(),lastAction="equals";break;default:alert(`Error: operator "${t}" is not valid.`)}}function clear(){selectedOperator=void 0,runningTotal=0,currentOperand=0,lastAction="equals",outputValue="0"}function backspace(){outputValue="number"!==lastAction||outputValue.length<=1?"0":outputValue.slice(0,-1)}function execute(){switch(selectedOperator){case"divide":runningTotal=Math.floor(runningTotal/currentOperand);break;case"multiply":runningTotal*=currentOperand;break;case"subtract":runningTotal-=currentOperand;break;case"add":runningTotal+=currentOperand;break;case void 0:runningTotal=currentOperand;break;default:return void alert(`Error: operator "${selectedOperator}" is not valid.`)}outputValue=runningTotal.toString()}function init(){document.querySelector(".calc").addEventListener("click",(function(t){"BUTTON"===t.target.tagName&&buttonClicked(t.target.value)}))}init();
//# sourceMappingURL=index.e62db03e.js.map
